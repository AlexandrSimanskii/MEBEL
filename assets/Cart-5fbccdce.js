import{r as l,C as u,j as s,i as p}from"./index-1a039724.js";const v=()=>{var t,e,d,n,i;const{addCardsCountPlus:o,addCardsCountMinus:h,user:a,navigate:x,setUser:j}=l.useContext(u),_=c=>{p.patch(`app/users/${a.id}`,{carts:a.carts.filter(r=>r.id!==c.id)}).then(r=>{localStorage.setItem("user",JSON.stringify(r.data)),j(r.data)})};return s.jsx("div",{className:"cart",children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"cart__inner",children:[s.jsxs("div",{className:"cart__top",children:[s.jsx("div",{className:"cart__top-title",children:"Ваша корзина"}),s.jsx("div",{className:"cart__top-position",children:`${(t=a.carts)==null?void 0:t.length} ${((e=a.carts)==null?void 0:e.length.toString().at(-1))==1?"позиция":"позиций"}  `})]}),(d=a.carts)==null?void 0:d.map(c=>s.jsx(l.Fragment,{children:s.jsxs("div",{className:"cart__card",children:[s.jsx("img",{src:c.image,alt:"furnish"}),s.jsxs("div",{className:"cart__card-content",children:[s.jsx("h4",{children:c.title}),s.jsx("dl",{className:"cart__card-inform",children:s.jsxs("div",{children:[s.jsx("dt",{children:"Размер(Ш×Д×В):"}),s.jsxs("dd",{children:[c.deep," × ",c.width," × ",c.height]})]})})," ",s.jsxs("div",{className:"cart__card-delete",children:[s.jsx("button",{onClick:()=>h(c._id),children:"-"}),s.jsx("span",{children:c.count}),s.jsx("button",{onClick:()=>o(c._id),children:"+"})]})]}),s.jsxs("h5",{children:["Цена ",c.price," р"]}),s.jsxs("h5",{children:["Сумма ",c.price*c.count]}),s.jsx("div",{onClick:()=>{_(c)},className:"cart__card-closed",children:s.jsx("img",{src:"/images/image/cross.svg",alt:"cross"})})]})},c._id))]}),s.jsx("div",{children:(n=a.carts)!=null&&n.length?s.jsxs("div",{className:"cart__bottom",children:[s.jsxs("p",{children:["Итоговая сумма"," ",(i=a.carts)==null?void 0:i.reduce((c,r)=>c+r.price*r.count,0)," ","p"]}),s.jsx("button",{onClick:()=>x("/checkout"),children:"Оформить заказ"})]}):""})]})})};export{v as default};
