import{r as l,C as N,e as k,j as e}from"./index-1a039724.js";const g=()=>{var i,d;const{user:c,addOrders:x,navigate:a}=l.useContext(N),[p,u]=l.useState(10),[j,m]=l.useState(!1),{watch:f,register:t,handleSubmit:y,formState:{errors:C}}=k(),n=f("pay"),_=s=>{var o;console.log(s);let r={...s,order:c.carts,totalPrice:(o=c.carts)==null?void 0:o.reduce((v,h)=>v+h.price*h.count,0)};x(r,m,b)},b=()=>{setInterval(()=>{u(s=>s>1?s-1:a("/"))},1e3)};return e.jsx("section",{className:"checkout",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"checkout__inner",children:e.jsxs("form",{action:"submit",onSubmit:y(_),children:[e.jsxs("div",{className:"user__inform",children:[e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Данные покупателя"}),e.jsx("input",{...t("name"),defaultValue:c.username,placeholder:"Имя",type:"text"}),e.jsx("input",{...t("email"),defaultValue:c.email,placeholder:"Email",type:"email"}),e.jsx("input",{...t("number"),defaultValue:c.number,placeholder:"Телефон",type:"phone"})]}),e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Адресс покупателя"}),e.jsx("input",{...t("city"),placeholder:"Город",type:"text"}),e.jsx("input",{...t("street"),placeholder:"Улица",type:"text"}),e.jsx("input",{...t("home"),placeholder:"Дом",type:"text"}),e.jsx("input",{...t("flat"),placeholder:"Квартира",type:"text"})]}),e.jsxs("div",{className:"form__field",children:[e.jsx("h5",{children:"Коментарии"}),e.jsx("textarea",{...t("info"),placeholder:"Дополнительная информация",name:"info",cols:"30",rows:"10"})]})]}),e.jsxs("div",{className:"order__inform",children:[e.jsxs("table",{children:[e.jsx("caption",{children:"Ваш заказ"}),e.jsx("thead",{}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Товар"}),e.jsx("td",{children:"Кол-во"}),e.jsx("td",{children:" Всего"})]}),(i=c.carts)==null?void 0:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.count}),e.jsxs("td",{children:[s.price*s.count," руб"]})]},s._id)),e.jsxs("tr",{children:[e.jsx("td",{children:"Итого"}),e.jsxs("td",{children:[(d=c.carts)==null?void 0:d.reduce((s,r)=>s+r.price*r.count,0),"руб"]})]})]})]}),e.jsxs("div",{className:"checkout__payment",children:[e.jsx("p",{children:"Способы оплаты"}),e.jsxs("div",{className:"checkout__payment-choice",children:[e.jsxs("label",{className:"checkout-label",children:["Наличные",e.jsx("input",{...t("pay"),name:"pay",type:"radio",value:"Наличные",checked:n==="Наличные"})]}),e.jsxs("label",{className:"checkout-label",children:["Картой",e.jsx("input",{...t("pay"),name:"pay",type:"radio",value:"Банковская карта",checked:n==="Банковская карта"})]})]}),e.jsx("button",{children:"Разместить заказ"})]})]})]})}),j&&e.jsxs("div",{className:"popup",children:[e.jsx("h2",{children:"Заказ оформлен"}),e.jsxs("p",{children:["Через ",p,"сек. вас перекинет на главную страницу"]}),e.jsx("button",{onClick:()=>a("/"),children:"Перейти на главную"})]})]})})};export{g as default};
